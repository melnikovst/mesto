(()=>{"use strict";class t{constructor(t,e){this._settings=t,this._form=e,this._inputSelector=t.inputSelector,this._errorClass=t.errorClass,this._inputErrorClass=t.inputErrorClass,this._inactiveButtonClass=t.inactiveButtonClass,this._submitButtonSelector=t.submitButtonSelector}enableValidation(){this._setEventListeners()}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputs(t),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._error=this._form.querySelector(`.${t.id}-error`),this._hideError(t)}))}_toggleButtonState(){!0===this._checkInvalidInputs()?this.disableButton():this._enableButton()}_enableButton(){this._button.classList.remove(this._inactiveButtonClass),this._button.disabled=!1}disableButton(){this._button.classList.add(this._inactiveButtonClass),this._button.disabled=!0}_checkInvalidInputs(){return this._inputList.some((t=>!t.validity.valid))}_showError(t){t.classList.add(this._inputErrorClass),this._error.textContent=t.validationMessage,this._error.classList.add(this._errorClass)}_hideError(t){!1!==this._error&&(t.classList.remove(this._inputErrorClass),this._error.textContent="",this._error.classList.remove(this._errorClass))}_checkInputs(t){this._error=this._form.querySelector(`.${t.id}-error`),t.validity.valid?this._hideError(t):this._showError(t)}}const e=document.querySelector(".profile__title-button"),i=document.querySelector(".popup_type_profile-info"),s=document.querySelector(".form__input_type_name"),n=document.querySelector(".form__input_type_job"),r=document.querySelector(".profile__subtitle"),o=document.querySelector(".profile__title"),a=(document.querySelector(".cards"),document.querySelector(".popup_type_card-add")),l=document.querySelector(".profile__button"),c=document.querySelector(".form__input_type-name"),d=document.querySelector(".form__input_type-link"),u=document.querySelector(".form_popup_template"),h=document.querySelector(".form_type_profile"),_=document.querySelector(".popup_type_picture"),p=(document.querySelector(".popup__image-item"),document.querySelector(".popup__image-subtitle"),document.querySelector("#card-button")),m=Array.from(document.querySelectorAll(".popup")),f=document.querySelector("#profile-button"),y=(Array.from(document.querySelectorAll(".form")),document.querySelector(".card")),x={next:document.querySelector(".slider-button-next"),prev:document.querySelector(".slider-button-prev")},b={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_invalid",errorClass:"form__invalid-message_active"},v=new t(b,h),g=new t(b,u);class w{constructor(t,e,i){this._name=t.name,this._link=t.link,this._cardTemplate=e,this._handleCardClick=i}_getElement(){return document.querySelector(this._cardTemplate).content.querySelector(".card").cloneNode(!0)}generateCard(){this._item=this._getElement(),this._item.querySelector(".card__title").textContent=this._name;const t=this._item.querySelector(".card__image");return t.src=this._link,t.alt=this._name,this._setListeners(),this._item}_setListeners(){this._cardButton=this._item.querySelector(".card__button"),this._cardButton.addEventListener("click",(()=>{this._handleLike()})),this._item.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleting()})),this._item.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_handleLike(){this._cardButton.classList.toggle("card__button_active")}_handleDeleting(){this._item.remove(),this._item=null}}class S{constructor(t){this._item=t}open(){this._item.classList.add("popup_opened"),document.addEventListener("keyup",(t=>{this._handleEscClose(t)}))}close(){this._item.classList.remove("popup_opened"),document.removeEventListener("keyup",(t=>{this._handleEscClose(t)}))}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._closeBtn=this._item.querySelector(".popup__button-escape"),this._item.addEventListener("mousedown",(t=>{(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__button-escape"))&&this.close()}))}}class L extends S{constructor(t,e){super(t),this._submitHandler=e,this._form=this._item.querySelector(".form")}_getInputValues(){return this._inputsList=this._form.querySelectorAll(".form__input"),this._inputData={},this._inputsList.forEach((t=>this._inputData[t.id]=t.value)),this._inputData}setEventListeners(){super.setEventListeners(),this._item.addEventListener("submit",(t=>{this._obj=this._getInputValues(),t.preventDefault(),this._submitHandler(this._obj),this.close()}))}close(){super.close(),setTimeout((()=>this._form.reset()),500)}}const q=new class extends S{constructor(t){super(t)}open(t,e){this._image=this._item.querySelector(".popup__image-item"),this._title=this._item.querySelector(".popup__image-subtitle"),this._image.src=e,this._title.textContent=t,this._image.alt=t,super.open()}}(_),k=document.querySelector(".card-container");console.log(q);const E=(t,e)=>{q.open(t,e)},C=new class{constructor({items:t,renderer:e},i){this._container=i,this._items=t,this._renderer=e}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Файолет-Тюрме",link:"https://images.unsplash.com/photo-1655032827680-1c5acdc6dea4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"},{name:"Порто",link:"https://images.unsplash.com/photo-1655063971080-a96a49fa8a51?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"},{name:"Langkawi skybridge, Малайзия",link:"https://images.unsplash.com/photo-1657462912343-eff2e51b8e6b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80"},{name:"Лувр, Франция",link:"https://images.unsplash.com/photo-1657420228473-e3fee079626b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=327&q=80"},{name:"Альпы",link:"https://images.unsplash.com/photo-1657382451966-3448f72ea564?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1228&q=80"},{name:"Колизей, Рим",link:"https://images.unsplash.com/photo-1656541314159-a2631f5b8c1d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"},{name:"Рио-де-Жанейро, Бразилия",link:"https://images.unsplash.com/photo-1656989048329-4226c441e501?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=326&q=80"},{name:"Казанский собор, Казань",link:"https://images.unsplash.com/photo-1655404474510-8ece3da2884b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=388&q=80"},{name:"Сидней, Австралия",link:"https://images.unsplash.com/photo-1656893239772-d75e35ea379b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80"},{name:"Гонконг, Китай",link:"https://images.unsplash.com/photo-1656465344734-94056634db85?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1322&q=80"},{name:"Амстердам, Нидерланды",link:"https://images.unsplash.com/photo-1656488551854-58448c688008?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=415&q=80"}],renderer:t=>{const e=new w(t,"#card-template",E).generateCard();C.addItem(e)}},k);q.setEventListeners();const B=()=>{const t={link:d.value,name:c.value},e=new w(t,"#card-template",E).generateCard();k.prepend(e),I.close()};v.enableValidation(),g.enableValidation();const M=new class{constructor({profileName:t,profileDescription:e}){this._author=t,this._description=e}getUserInfo(){return this._object={name:this._author.textContent,description:this._description.textContent},this._object}setUserInfo(t){this._author.textContent=t.name,this._description.textContent=t.description}}({profileName:o,profileDescription:r}),H=t=>{M.setUserInfo(t)},D=new L(i,H);D.setEventListeners();const I=new L(a,B);I.setEventListeners(),window.addEventListener("DOMContentLoaded",(()=>{m.forEach((t=>t.classList.add("popup_animated")))})),l.addEventListener("click",(()=>{I.open(),u.reset(),g.resetValidation()})),e.addEventListener("click",(()=>{M.getUserInfo(),D.open(),s.value=o.textContent,n.value=r.textContent,v.resetValidation(),v.disableButton()})),f.addEventListener("submit",H),p.addEventListener("submit",B),C.renderItems();const G=new class{constructor(t,e,i,s){this._card=t,this._buttons=e,this._container=i,this._cardIndex=0,this._throttle=s,this.changeSlideThrottling=this._throttle(this._changeSlide.bind(this),150)}_changeSlide(t){this._cardList=document.querySelectorAll(".card"),this._slidesCount=this._cardList.length,this._slidesCount<=3||(this._dynamicCardElementWidth=this._container.querySelector(".card").clientWidth+20,"next"===t?(this._cardIndex++,this._cardIndex===this._slidesCount-2&&(this._cardIndex=0),this._cardIndex>=this._slidesCount-1&&this._slidesCount<16&&(this._cardIndex=this._slidesCount-3)):"prev"===t&&(this._container.style.transform=`translateX(${this._cardIndex*this._dynamicCardElementWidth}px)`,this._cardIndex--,this._cardIndex<0&&(this._cardIndex=this._slidesCount-3)),this._container.style.transform=`translateX(-${this._cardIndex*this._dynamicCardElementWidth}px)`)}setButtonsEventListeners(){this._buttons.prev.addEventListener("click",(()=>{this.changeSlideThrottling("prev")})),this._buttons.next.addEventListener("click",(()=>{this.changeSlideThrottling("next")}))}}(y,x,k,(function(t,e){let i=null;return function(...s){i||(i=setTimeout((()=>{t(...s),clearTimeout(i),i=null}),e))}}));G.setButtonsEventListeners();const j=document.querySelector(".cards"),A=document.querySelector(".navigate-buttons");window.addEventListener("resize",(()=>{window.innerWidth>900&&(j.classList.add("card-flex"),A.style.display="flex",x.next.style.display="block",V.style.visibility="visible",W.style.visibility="hidden"),window.innerWidth<900&&(k.removeAttribute("style","transform"),j.classList.remove("card-flex"),x.next.style.display="none",A.style.display="none")}));const V=document.querySelector(".grid"),W=document.querySelector(".flex");V.addEventListener("click",(()=>{k.removeAttribute("style","transform"),k.classList.remove("card-flex"),k.style.display="grid",x.next.style.display="none",x.prev.style.display="none",W.style.visibility="visible",V.style.visibility="hidden"})),W.addEventListener("click",(()=>{(k.style.display="grid")&&(k.style.display="flex",x.next.style.display="block",x.prev.style.display="block",V.style.visibility="visible",W.style.visibility="hidden")})),window.addEventListener("DOMContentLoaded",(()=>{W.style.visibility="hidden"})),console.log(window.innerWidth),console.log(k)})();